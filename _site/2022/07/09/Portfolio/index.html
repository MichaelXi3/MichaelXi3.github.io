<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="theme-color" content="#000000">

    <!-- Open Graph -->
    <meta property="og:title"
        content="Build Portfolio Website with Firebase and VueJS - Sphere | Xi">
    
    <meta property="og:type" content="article">
    <meta property="og:description" content="Build Portfolio Website with Firebase and VueJS
">
    
    <meta property="article:published_time" content=" 2022-07-09T00:00:00Z">
    
    
    <meta property="article:author" content="Michael Xi">
    
    
    <meta property="article:tag" content="VueJS">
    
    <meta property="article:tag" content="Firebase">
    
    
    <meta property="og:image" content="http://localhost:4000">
    <meta property="og:url" content="http://localhost:4000/2022/07/09/Portfolio/">
    <meta property="og:site_name" content="Sphere | Xi">

    <title>Build Portfolio Website with Firebase and VueJS - Sphere | Xi</title>

    <!-- Web App Manifest -->
    <link rel="manifest" href="/pwa/manifest.json">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/img/favicon.ico">

    <!-- Canonical URL -->
    <link rel="canonical" href="http://localhost:4000/2022/07/09/Portfolio/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href=" /css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href=" /css/hux-blog.min.css">

    <!-- Custom Fonts -->
    <!-- <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet"
        type="text/css">


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>

    <!-- Google AdSense -->
    <script data-ad-client="ca-pub-6487568398225121" async
        src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- Navigation -->

    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">Sphere</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div id="huxblog_navbar">
                <div class="navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="/">Home</a>
                        </li>
                        
                        
                        
                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                        
                        
                        <li>
                            <a href="/archive/">Archive</a>
                        </li>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <li class="search-icon">
                            <a href="javascript:void(0)">
                                <i class="fa fa-search"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <script>
        // Drop Bootstarp low-performance Navbar
        // Use customize navbar with high-quality material design animation
        // in high-perf jank-free CSS3 implementation
        var $body = document.body;
        var $toggle = document.querySelector('.navbar-toggle');
        var $navbar = document.querySelector('#huxblog_navbar');
        var $collapse = document.querySelector('.navbar-collapse');

        var __HuxNav__ = {
            close: function () {
                $navbar.className = " ";
                // wait until animation end.
                setTimeout(function () {
                    // prevent frequently toggle
                    if ($navbar.className.indexOf('in') < 0) {
                        $collapse.style.height = "0px"
                    }
                }, 400)
            },
            open: function () {
                $collapse.style.height = "auto"
                $navbar.className += " in";
            }
        }

        // Bind Event
        $toggle.addEventListener('click', function (e) {
            if ($navbar.className.indexOf('in') > 0) {
                __HuxNav__.close()
            } else {
                __HuxNav__.open()
            }
        })

        /**
         * Since Fastclick is used to delegate 'touchstart' globally
         * to hack 300ms delay in iOS by performing a fake 'click',
         * Using 'e.stopPropagation' to stop 'touchstart' event from 
         * $toggle/$collapse will break global delegation.
         * 
         * Instead, we use a 'e.target' filter to prevent handler
         * added to document close HuxNav.  
         *
         * Also, we use 'click' instead of 'touchstart' as compromise
         */
        document.addEventListener('click', function (e) {
            if (e.target == $toggle) return;
            if (e.target.className == 'icon-bar') return;
            __HuxNav__.close();
        })
    </script>
    <!-- Search -->
<div class="search-page">
  <div class="search-icon-close-container">
    <span class="search-icon-close">
      <i class="fa fa-chevron-down"></i>
    </span>
  </div>
  <div class="search-main container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <form></form>
        <input type="text" id="search-input" placeholder="$ grep...">
        </form>
        <div id="search-results" class="mini-post-list"></div>
      </div>
    </div>
  </div>
</div>

    <!-- Image to hack wechat -->
<!-- <img src="/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="/img/inpost/VueFire.png" width="0" height="0"> -->

<!-- Post Header -->



<style type="text/css">
    header.intro-header{
        position: relative;
        background-image: url('/img/inpost/VueFire.png');
        background: ;
    }

    
</style>




<header class="intro-header" >

    <div class="header-mask"></div>
    
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/archive/?tag=VueJS" title="VueJS">VueJS</a>
                        
                        <a class="tag" href="/archive/?tag=Firebase" title="Firebase">Firebase</a>
                        
                    </div>
                    <h1>Build Portfolio Website with Firebase and VueJS</h1>
                    
                    <h2 class="subheading">Firebase and VueJS</h2>
                    <span class="meta">Posted by Michael Xi on July 9, 2022</span>
                </div>
            </div>
        </div>
    </div>
</header>







<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

    <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <!-- Multi-Lingual -->
                

				<h1 id="build-portfolio-website-with-firebase-and-vuejs">Build Portfolio Website with Firebase and VueJS</h1>

<h1 id="overview">Overview</h1>

<blockquote>
  <p>Since the rise of the internet, creating a personal website has been increasingly popular. These days, the greatest method to develop a personal brand is with a website or portfolio. Many employers provide candidates the chance to submit their individual websites as a way to stand out. So, the best first project to complete if you‚Äôre interested in learning about web development is to create a website for yourself.</p>
</blockquote>

<blockquote>
  <p>ü§ñÔ∏è <strong>Github Link</strong>: <a href="https://github.com/MichaelXi3/Personal_Website">https://github.com/MichaelXi3/Personal_Website</a></p>

  <p>üíª <strong>Website Link</strong>: <a href="https://michaelxi.com/">https://michaelxi.com/</a></p>

</blockquote>

<h1 id="tech-stack">Tech Stack</h1>

<p>For my personal website, I used the combination of <strong>VueJS</strong>, the frontend, and the <strong>Firebase</strong> as my backend.</p>

<blockquote>
  <p><strong>Firebase</strong> is a BaaS (Backend as a Service) company that provides the most commonly used backend services, including but not limited to user authentication, Image&amp;Video Storage, Firestore Database, Hosting for deployment, Firebase Function, etc.</p>

  <p><img src="https://s2.loli.net/2023/02/17/8ScgMLJEB3GyrjC.png" alt="Êà™Â±è2022-07-08 ‰∏ãÂçà11.22.31.png" /></p>

</blockquote>

<blockquote>
  <p><strong>VueJS</strong> is a very popular front-end JS framework. From my understanding, the core idea of Vue is ‚ÄúBuild by Components‚Äù. With VueJS, you can build you feature piece by piece. For instance, the blogCard can be an individual component that used in many places. Each element is a Vue file. Inside a ‚Äò.vue‚Äô file, you can see HTML, JS, CSS in one page. Thus, writing vue is awesome, you can see the coordination of three basics in one page! Additionally, the core of Vue also includes ‚Äústate management‚Äù, ‚Äúrouter‚Äù, and so on.</p>

  <p><img src="https://s2.loli.net/2023/02/17/8lqRtQr5kZVnfNF.png" alt="Êà™Â±è2022-07-08 ‰∏ãÂçà11.32.22.png" /></p>

</blockquote>

<h1 id="project-structure">Project Structure</h1>

<blockquote>
  <p>The VueFire web project structure can be divided into Vue that responsible for the frontend and Firebase that responsible for the backend. The connection between the frontend and backend is the API provided by Firebase. For instance, the user registration can be achieved through a Firebase API with the result of storing user‚Äôs info to Firebase database.</p>

</blockquote>

<blockquote>
  <p>‚úçüèª Project File Structure</p>

  <p><img src="https://s2.loli.net/2023/02/17/euyKc3GM24YipXT.png" alt="Untitled" /></p>
</blockquote>

<blockquote>
  <p><strong>Illustration</strong>:</p>

  <ul>
    <li>VueJS manages the structure of frontend components, each component are very likely built upon other components. For rendering components or views, the frontend needs to acquire the ‚Äòstate‚Äô information. Thus, the ‚Äò<strong>State Management</strong>‚Äô is very crucial for a frontend framework like Vue. In Vue, it has a place called ‚Äòstore‚Äô initiated from Vuex. The ‚Äòstore‚Äô stores all the states used in the project, similar to the Redux of React. The only difference is that Vue‚Äôs store is much easier to implement! For the store of Vue, it connects with the Firebase database (Firestore). By functions in the store‚Äôs ‚Äòactions‚Äô, it can interact with the data stored in Firestore. So here is a connection point between the frontend and backend. Other than that, the connections also include user authentication API, set as Admin Firebase cloud function, etc.</li>
    <li><strong>Vue route</strong> is another essential part of VueJS, it provides a simple way of making routes for your website. I believe VueJS has encapsulated many details behind the route section because it involves many server interactions in routes.</li>
  </ul>
</blockquote>

<h1 id="features">Features</h1>

<h2 id="login--register">Login &amp; Register</h2>

<h3 id="-frontend">üé® Frontend</h3>

<ol>
  <li><strong>Frontend Design</strong></li>
</ol>

<blockquote>
  <ul>
    <li>Login, Register, Forget Password Page</li>
  </ul>

  <p><img src="https://s2.loli.net/2023/02/17/B4WiD3lmQFEdHMT.png" alt="Êà™Â±è2022-07-09 ‰∏äÂçà11.38.01.png" /></p>

  <ol>
    <li><strong>VueJS Frontend HTML</strong></li>
  </ol>
</blockquote>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;template&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-wrap"</span><span class="nt">&gt;</span>
      **<span class="nt">&lt;form</span><span class="na">**</span> <span class="na">class=</span><span class="s">"login"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"login-register"</span><span class="nt">&gt;</span>
              Don't have an account?
              <span class="nt">&lt;router-link</span> <span class="na">class=</span><span class="s">"router-link"</span> <span class="na">:to=</span><span class="s">"{ name: 'Register' }"</span><span class="nt">&gt;</span>Register<span class="nt">&lt;/router-link&gt;</span>
          <span class="nt">&lt;/p&gt;</span>
          <span class="nt">&lt;h2&gt;</span>Login to Explore<span class="nt">&lt;/h2&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"inputs"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"input"</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">placeholder=</span><span class="s">"Email"</span> <span class="na">**v-model=</span><span class="s">"email"</span><span class="na">**</span> <span class="nt">/&gt;</span>
                  <span class="nt">&lt;email</span> <span class="na">class=</span><span class="s">"icon"</span> <span class="nt">/&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"input"</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">placeholder=</span><span class="s">"Password"</span> <span class="na">**v-model=</span><span class="s">"password"</span><span class="na">**</span> <span class="nt">/&gt;</span>
                  <span class="nt">&lt;password</span> <span class="na">class=</span><span class="s">"icon"</span> <span class="nt">/&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">v-show=</span><span class="s">"error"</span> <span class="na">class=</span><span class="s">"error"</span><span class="nt">&gt;&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;router-link</span> <span class="na">class=</span><span class="s">"forgot-passward"</span> <span class="na">:to=</span><span class="s">"{ name: 'ForgotPassword' }"</span><span class="nt">&gt;</span>Forgot your password?<span class="nt">&lt;/router-link&gt;</span>
          <span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click.prevent=</span><span class="s">"signIn"</span><span class="nt">&gt;</span> Sign In <span class="nt">&lt;/button&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"angle"</span><span class="nt">&gt;&lt;/div&gt;</span>
      <span class="nt">&lt;/form&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"background"</span><span class="nt">&gt;&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/template&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>Filling in information requires HTML ‚Äú<strong>form</strong>‚Äù, we only need to decorate the default form to make it looks nicer.</li>
  <li><strong>v-model</strong> binds the user inputs with it, so that JS script could call it by this.email and this.password.</li>
</ul>

<h3 id="backend">üîß¬†Backend</h3>

<aside>
‚úçüèª For Backend, we want to use user‚Äôs input email and password to create an account for the user. Then the user account information will be stored in a database with UID and user‚Äôs info. This can be achieved through calling the firebase API.

**firebase.auth()** provides the ‚Äòuser authentication‚Äô backend service, including registration API ‚ÄúcreateUserWithEmailAndPassword‚Äù, login API ‚ÄúsignInWithEmailAndPassword‚Äù, and forget password API ‚ÄúsendPasswordResetEmail‚Äù. With these encapsulated APIs, we can  build user login, register, find password feature easily.

</aside>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="nx">methods</span><span class="p">:</span> <span class="p">{</span>
        <span class="nf">signIn</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">firebase</span>
                <span class="p">.</span><span class="nf">auth</span><span class="p">()</span>
                <span class="p">.</span><span class="nf">signInWithEmailAndPassword</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">email</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">password</span><span class="p">)</span>
                <span class="p">.</span><span class="nf">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nf">push</span><span class="p">({</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Home</span><span class="dl">"</span> <span class="p">});</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">errorMsg</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
                    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Signed in uid: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">firebase</span><span class="p">.</span><span class="nf">auth</span><span class="p">().</span><span class="nx">currentUser</span><span class="p">.</span><span class="nx">uid</span><span class="p">);</span>
                <span class="p">}).</span><span class="nf">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">errorMsg</span> <span class="o">=</span> <span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>
                <span class="p">});</span>
        <span class="p">}</span>
    <span class="p">},</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="blogging">Blogging</h2>

<h3 id="frontend">üé®¬†Frontend</h3>

<blockquote>
  <p>Edit Blog, View Blog</p>

  <p><img src="https://s2.loli.net/2023/02/17/TSaezBIq6iALVvU.png" alt="Êà™Â±è2022-07-09 ‰∏ãÂçà12.12.14.png" /></p>

  <p><img src="https://s2.loli.net/2023/02/17/xvX4L5hGQMkpSfB.png" alt="Êà™Â±è2022-07-09 ‰∏ãÂçà12.22.10.png" /></p>

</blockquote>

<h3 id="-backend">üîß Backend</h3>

<ol>
  <li>
    <p><strong>Load all blogs to Bloggie page from Firestore</strong></p>

    <p>For each blogPost, it‚Äôs a collection of states that are stored in the Firestore database. When the web app is mounted, the data inside Firestore will be pulled out by a function called ‚ÄògetPost‚Äô and stored in the Vuex.store (VueJS state management center).</p>

    <p>Then the Blogs page will display all blogPosts based on the blogPost[] array that stores all posts states.</p>
  </li>
</ol>

<ul>
  <li>
    <p><strong>Vuex.store: Frontend State Management &amp; Initialize States from Firebase Backend</strong></p>

    <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre></td><td class="rouge-code"><pre>  <span class="nx">state</span><span class="p">:</span> <span class="p">{</span>
      <span class="c1">// All Blogs will be populated to this array from Firestore db</span>
      <span class="nl">blogPost</span><span class="p">:[],</span>
      <span class="nx">postLoaded</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        
      <span class="c1">// These are the states that a blogPost needs</span>
      <span class="nx">blogHTML</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Write your updates here...</span><span class="dl">"</span><span class="p">,</span>
      <span class="nx">blogTitle</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
      <span class="nx">blogPhotoName</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="c1">// BlogCoverPhotoName</span>
      <span class="nx">blogPhotoFileURL</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">blogPhotoPreview</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">editPost</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="o">**</span><span class="c1">// Populate the posts from Firebase database to Firestore**</span>
      <span class="k">async</span> <span class="nf">getPost</span><span class="p">({</span> <span class="nx">state</span> <span class="p">})</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">dataBase</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">db</span><span class="p">.</span><span class="nf">collection</span><span class="p">(</span><span class="dl">"</span><span class="s2">blogPosts</span><span class="dl">"</span><span class="p">).</span><span class="nf">orderBy</span><span class="p">(</span><span class="dl">'</span><span class="s1">date</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">desc</span><span class="dl">'</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">dbResults</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">dataBase</span><span class="p">.</span><span class="nf">get</span><span class="p">();</span> <span class="c1">// This returns an array</span>
      <span class="nx">dbResults</span><span class="p">.</span><span class="nf">forEach</span><span class="p">(</span><span class="nx">doc</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="c1">// newly added doc does not already exist in blogPost array</span>
          <span class="nf">if </span><span class="p">(</span><span class="o">!</span><span class="nx">state</span><span class="p">.</span><span class="nx">blogPost</span><span class="p">.</span><span class="nf">some</span><span class="p">(</span><span class="nx">post</span> <span class="o">=&gt;</span> <span class="nx">post</span><span class="p">.</span><span class="nx">blogID</span> <span class="o">===</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">id</span><span class="p">))</span> <span class="p">{</span>
          <span class="c1">// Object: new post</span>
          <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
              <span class="na">blogID</span><span class="p">:</span> <span class="nx">doc</span><span class="p">.</span><span class="nf">data</span><span class="p">().</span><span class="nx">blogID</span><span class="p">,</span>
              <span class="na">blogHTML</span><span class="p">:</span> <span class="nx">doc</span><span class="p">.</span><span class="nf">data</span><span class="p">().</span><span class="nx">blogHTML</span><span class="p">,</span>
              <span class="na">blogCoverPhoto</span><span class="p">:</span> <span class="nx">doc</span><span class="p">.</span><span class="nf">data</span><span class="p">().</span><span class="nx">blogCoverPhoto</span><span class="p">,</span>
              <span class="na">blogTitle</span><span class="p">:</span> <span class="nx">doc</span><span class="p">.</span><span class="nf">data</span><span class="p">().</span><span class="nx">blogTitle</span><span class="p">,</span>
              <span class="na">blogDate</span><span class="p">:</span> <span class="nx">doc</span><span class="p">.</span><span class="nf">data</span><span class="p">().</span><span class="nx">date</span><span class="p">,</span>
              <span class="na">blogCoverPhotoName</span><span class="p">:</span> <span class="nx">doc</span><span class="p">.</span><span class="nf">data</span><span class="p">().</span><span class="nx">blogCoverPhotoName</span><span class="p">,</span>
          <span class="p">};</span>
          <span class="nx">state</span><span class="p">.</span><span class="nx">blogPost</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
          <span class="p">}</span>
      <span class="p">});</span>
      <span class="nx">state</span><span class="p">.</span><span class="nx">postLoaded</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>
    <p><strong>Firestore NoSQL Database</strong></p>

    <blockquote>
      <p>Structure of Firestore</p>

      <p><img src="https://s2.loli.net/2023/02/17/TvO5JjtFzRbMqwS.png" alt="Êà™Â±è2022-07-09 ‰∏ãÂçà12.33.20.png" /></p>

    </blockquote>
  </li>
</ul>

<ol>
  <li>
    <p><strong>Create a new blog post and store it in Firestore</strong></p>

    <p>Create a new Blog Post includes the process of uploading Blog cover photo, enter blog content and pictures, as well as enter blog title.</p>
  </li>
</ol>

<ul>
  <li>
    <p><strong>Upload blog cover photo</strong></p>

    <blockquote>
      <p>Assign local data ‚Äúfile‚Äù with the uploaded file, the cover photo img</p>

    </blockquote>

    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"upload-file"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"blog-photo"</span><span class="nt">&gt;</span> Upload Cover Photo <span class="nt">&lt;/label&gt;</span>
      <span class="c">&lt;!-- Once user uploads photo, there will be changes detected, which triggers function --&gt;</span>
      **<span class="c">&lt;!-- 'refs' is a binding b/w user uploaded file and script method, in script portion, we can refer to this file by refs --&gt;</span>**
      <span class="nt">&lt;input</span> <span class="err">@</span><span class="na">change=</span><span class="s">"fileChange"</span> <span class="na">type=</span><span class="s">"file"</span> <span class="na">ref=</span><span class="s">"blogPhoto"</span> <span class="na">id=</span><span class="s">"blog-photo"</span> <span class="na">accept=</span><span class="s">".png, .jpg, .jpeg"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">"openPreview"</span> <span class="na">class=</span><span class="s">"preview"</span> <span class="na">:class=</span><span class="s">"{ 'button-inactive': !this.$store.state.blogPhotoFileURL }"</span><span class="nt">&gt;</span>Preview Photo<span class="nt">&lt;/button&gt;</span>
      <span class="nt">&lt;span&gt;</span>File Chosen: <span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>
    <p><strong>Write blog content and add picture</strong></p>

    <blockquote>
      <p>We can use vue-editor for user to input text and even images with the help of imageHandler.</p>

    </blockquote>

    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"editor"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;vue-editor</span> <span class="na">:editorOptions=</span><span class="s">"editorSettings"</span> <span class="na">useCustomImageHandler</span> <span class="err">@</span><span class="na">image-added=</span><span class="s">"imageHandler"</span> <span class="na">v-model=</span><span class="s">"blogHTML"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>
    <p><strong>Create new post by uploading post in Firestore database &amp; uploading images to Firebase Storage</strong></p>

    <blockquote>
      <p>The process of create new post is simply the process of transferring user‚Äôs created states to database. As user writes a blog, the blog title is bind with v-model=‚ÄùblogTitle‚Äù, and the blogHTML is bind with v-model=‚ÄùblogHTML‚Äù, etc. What we need to do is to save these changes of states to our database.</p>

    </blockquote>

    <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
</pre></td><td class="rouge-code"><pre>  <span class="nf">uploadBlog</span><span class="p">()</span> <span class="p">{</span>
      <span class="o">**</span><span class="c1">// Check post validation**</span>
      <span class="nf">if </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">blogTitle</span><span class="p">.</span><span class="nx">length</span> <span class="o">!==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">blogHTML</span><span class="p">.</span><span class="nx">length</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
          <span class="c1">// If the coverPhoto file is uploaded or URL is not NULL</span>
          <span class="nf">if </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$store</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">blogPhotoFileURL</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">this</span><span class="p">.</span><span class="nx">loading</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
              <span class="o">**</span><span class="c1">// Validation Passed: Upload post cover photo to Firestore Storage</span>
              <span class="c1">// User Firebase Storge to store images**</span>
              <span class="kd">const</span> <span class="nx">storageRef</span> <span class="o">=</span> <span class="nx">firebase</span><span class="p">.</span><span class="nf">storage</span><span class="p">().</span><span class="nf">ref</span><span class="p">();</span> 
              <span class="kd">const</span> <span class="nx">docRef</span> <span class="o">=</span> <span class="nx">storageRef</span><span class="p">.</span><span class="nf">child</span><span class="p">(</span><span class="s2">`documents/BlogCoverPhotos/</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">$store</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">blogPhotoName</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
              <span class="nx">docRef</span><span class="p">.</span><span class="nf">put</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">file</span><span class="p">).</span><span class="nf">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">state_changed</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">snapshot</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">snapshot</span><span class="p">);</span>
              <span class="p">},</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
                  <span class="k">this</span><span class="p">.</span><span class="nx">loading</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
              <span class="o">**</span><span class="c1">// Validation Passed: Upload blog post to Firestore db**</span>
              <span class="p">},</span> <span class="nf">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
                  <span class="kd">const</span> <span class="nx">downloadURL</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">docRef</span><span class="p">.</span><span class="nf">getDownloadURL</span><span class="p">();</span>
                  <span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="k">await</span> <span class="nb">Date</span><span class="p">.</span><span class="nf">now</span><span class="p">();</span>
                  <span class="kd">const</span> <span class="nx">dateBase</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">db</span><span class="p">.</span><span class="nf">collection</span><span class="p">(</span><span class="dl">"</span><span class="s2">blogPosts</span><span class="dl">"</span><span class="p">).</span><span class="nf">doc</span><span class="p">();</span>
                  <span class="k">await</span> <span class="nx">dateBase</span><span class="p">.</span><span class="nf">set</span><span class="p">({</span>
                      <span class="na">blogID</span><span class="p">:</span> <span class="nx">dateBase</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
                      <span class="na">blogHTML</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">blogHTML</span><span class="p">,</span>
                      <span class="na">blogCoverPhoto</span><span class="p">:</span> <span class="nx">downloadURL</span><span class="p">,</span>
                      <span class="na">blogCoverPhotoName</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">blogCoverPhotoName</span><span class="p">,</span>
                      <span class="na">blogTitle</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">blogTitle</span><span class="p">,</span>
                      <span class="na">profileId</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">profileId</span><span class="p">,</span>
                      <span class="na">date</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">,</span>
                  <span class="p">});</span>
                  <span class="c1">// After press the button of publish, user will be redirected to that viewPost page to see how is't looks like</span>
                  <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">$store</span><span class="p">.</span><span class="nf">dispatch</span><span class="p">(</span><span class="dl">"</span><span class="s2">getPost</span><span class="dl">"</span><span class="p">);</span>
                  <span class="k">this</span><span class="p">.</span><span class="nx">loading</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                  <span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nf">push</span><span class="p">({</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ViewBlog</span><span class="dl">"</span><span class="p">,</span> <span class="na">params</span><span class="p">:</span> <span class="p">{</span><span class="na">blogid</span><span class="p">:</span> <span class="nx">dateBase</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span> <span class="p">});</span>
              <span class="p">});</span>
              <span class="k">return</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="o">**</span><span class="c1">// Error Handling: missing Blog cover photo**</span>
              <span class="k">this</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
              <span class="k">this</span><span class="p">.</span><span class="nx">errorMsg</span> <span class="o">=</span> <span class="dl">"</span><span class="s2"> Please ensure you uploaded a post cover photo!</span><span class="dl">"</span><span class="p">;</span>
              <span class="nf">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
                  <span class="k">this</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">},</span> <span class="mi">5000</span><span class="p">);</span>
              <span class="k">return</span><span class="p">;</span>
          <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="o">**</span><span class="c1">// Error Handling: missing Blog content || title**</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">errorMsg</span> <span class="o">=</span> <span class="dl">"</span><span class="s2"> Please ensure Post Title &amp; Post Content has been filled!</span><span class="dl">"</span><span class="p">;</span>
          <span class="nf">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
              <span class="k">this</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">},</span> <span class="mi">5000</span><span class="p">);</span>
          <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>
  <span class="p">},</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>

    <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre>  <span class="o">**</span><span class="c1">// Image Handler of img embeded in Blog content**</span>
  <span class="c1">// Store the user uploaded photo to firebase storage </span>
  <span class="c1">// and return back a downloadURL for the photo preview in vue-editor</span>
  <span class="nf">imageHandler</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">Editor</span><span class="p">,</span> <span class="nx">cursorLocation</span><span class="p">,</span> <span class="nx">resetUploader</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">loading</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="kd">const</span> <span class="nx">storageRef</span> <span class="o">=</span> <span class="nx">firebase</span><span class="p">.</span><span class="nf">storage</span><span class="p">().</span><span class="nf">ref</span><span class="p">();</span>
      <span class="kd">const</span> <span class="nx">docRef</span> <span class="o">=</span> <span class="nx">storageRef</span><span class="p">.</span><span class="nf">child</span><span class="p">(</span><span class="s2">`documents/blogPostPhotos/</span><span class="p">${</span><span class="nx">file</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
      <span class="nx">docRef</span><span class="p">.</span><span class="nf">put</span><span class="p">(</span><span class="nx">file</span><span class="p">).</span><span class="nf">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">state_changed</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">snapshot</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">snapshot</span><span class="p">);</span>
      <span class="p">},</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
      <span class="p">},</span> <span class="nf">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="kd">const</span> <span class="nx">downloadURL</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">docRef</span><span class="p">.</span><span class="nf">getDownloadURL</span><span class="p">();</span>
          <span class="o">**</span><span class="c1">// Insert img preview in vue-editor**</span>
          <span class="nx">Editor</span><span class="p">.</span><span class="nf">insertEmbed</span><span class="p">(</span><span class="nx">cursorLocation</span><span class="p">,</span> <span class="dl">"</span><span class="s2">image</span><span class="dl">"</span><span class="p">,</span> <span class="nx">downloadURL</span><span class="p">);</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">loading</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
          <span class="nf">resetUploader</span><span class="p">();</span>
      <span class="p">})</span>
  <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
</ul>

<h2 id="set-admin">Set Admin</h2>

<h3 id="backend-1">üîß¬†Backend</h3>

<ul>
  <li>
    <p>The special part of set user as Admin is that it involves the Firebase Cloud Function! Check out its definition below</p>
  </li>
  <li>
    <p>Cloud Functions for Firebase is¬†**a serverless framework that lets you automatically run backend code in response to events triggered by Firebase features and HTTPS requests.</p>
  </li>
</ul>

<ol>
  <li>
    <p><strong>Call addAdmin Firebase cloud function at Frontend</strong></p>

    <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre> <span class="k">async</span> <span class="nf">addAdmin</span><span class="p">()</span> <span class="p">{</span>
     <span class="c1">// Connect to firebase cloud functions</span>
     <span class="kd">const</span> <span class="nx">addAdmin</span> <span class="o">=</span> <span class="k">await</span> <span class="o">**</span><span class="nx">firebase</span><span class="p">.</span><span class="nf">functions</span><span class="p">().</span><span class="nf">httpsCallable</span><span class="p">(</span><span class="dl">'</span><span class="s1">addAdminRole</span><span class="dl">'</span><span class="p">)</span><span class="o">**</span><span class="p">;</span>
     <span class="c1">// **Pass parameters** to firebase cloud functions</span>
     <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">addAdmin</span><span class="p">({</span> <span class="na">email</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">adminEmail</span> <span class="p">});</span>
     <span class="c1">// Set functionMsg to display at span, HTML</span>
     <span class="k">this</span><span class="p">.</span><span class="nx">functionMsg</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>
 <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>
    <p><strong>Firebase cloud function implementation</strong></p>

    <blockquote>
      <p>The cloud function of Firebase is a <strong><code class="language-plaintext highlighter-rouge">Node.JS function</code></strong></p>

    </blockquote>

    <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre></td><td class="rouge-code"><pre> <span class="kd">const</span> <span class="nx">functions</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">firebase-functions</span><span class="dl">"</span><span class="p">);</span>
 <span class="kd">const</span> <span class="nx">admin</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">firebase-admin</span><span class="dl">"</span><span class="p">)</span>
 <span class="nx">admin</span><span class="p">.</span><span class="nf">initializeApp</span><span class="p">();</span>

 <span class="c1">// Cloud Function: addAdminRole</span>
 <span class="c1">// Implementations: multiple callbacks</span>
 <span class="c1">// After finished function, you need to deploy it to the firebase function by 'firebase  deploy --only functions' at terminal</span>
 <span class="nx">exports</span><span class="p">.</span><span class="nx">addAdminRole</span> <span class="o">=</span> <span class="o">**</span><span class="nx">functions</span><span class="p">.</span><span class="nx">https</span><span class="p">.</span><span class="nf">onCall</span><span class="p">((</span><span class="nx">data</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span><span class="o">**</span> <span class="o">=&gt;</span> <span class="p">{</span>
 <span class="k">return</span> <span class="nx">admin</span>
     <span class="p">.</span><span class="nf">auth</span><span class="p">()</span>
     <span class="p">.</span><span class="nf">getUserByEmail</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">email</span><span class="p">)</span> <span class="c1">// Identify user by user's email</span>
     <span class="p">.</span><span class="nf">then</span><span class="p">((</span><span class="nx">user</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
         <span class="o">**</span><span class="c1">// This step adds a new admin setting to user's claim**</span>
         <span class="k">return</span> <span class="nx">admin</span><span class="p">.</span><span class="nf">auth</span><span class="p">().</span><span class="o">**</span><span class="nx">setCustomUserClaims</span><span class="o">**</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">uid</span><span class="p">,</span> <span class="p">{</span>
             <span class="na">admin</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
         <span class="p">});</span>
     <span class="c1">// Success Notification</span>
     <span class="p">}).</span><span class="nf">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Successfully Added!</span><span class="dl">"</span><span class="p">);</span>
         <span class="k">return</span> <span class="p">{</span>
             <span class="na">message</span><span class="p">:</span> <span class="s2">`Success! </span><span class="p">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">email</span><span class="p">}</span><span class="s2"> has been made an admin!`</span><span class="p">,</span>
         <span class="p">};</span>
     <span class="p">})</span>
     <span class="c1">// Error Notification</span>
     <span class="p">.</span><span class="nf">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error</span><span class="dl">"</span><span class="p">);</span>
         <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
     <span class="p">});</span>
 <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
</ol>

<ul>
  <li>
    <p><strong>Check if a user is an Admin</strong></p>

    <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>  <span class="o">**</span><span class="c1">// Get user's token or user's claims info**</span>
  <span class="kd">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nf">getIdTokenResult</span><span class="p">();</span>
  <span class="kd">const</span> <span class="nx">admin</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">token</span><span class="p">.</span><span class="nx">claims</span><span class="p">.</span><span class="nx">admin</span><span class="p">;</span> <span class="c1">// Boolean</span>
  <span class="nf">commit</span><span class="p">(</span><span class="dl">'</span><span class="s1">setProfileAdmin</span><span class="dl">'</span><span class="p">,</span> <span class="nx">admin</span><span class="p">);</span> <span class="c1">// Set curUser as admin if admin=true</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
</ul>

<h1 id="deployment">Deployment</h1>

<blockquote>
  <p>Firebase made deployment easy than ever. We only need to take the advantage of ‚Äú<strong>Hosting</strong>‚Äù service of firebase.</p>

  <p><img src="https://s2.loli.net/2023/02/17/Fs3v6RU8rbAuEca.png" alt="Êà™Â±è2022-07-09 ‰∏ãÂçà1.59.14.png" /></p>

</blockquote>

<p>After you finished all implementations of your website, use the following command to get ready for deployment: <code class="language-plaintext highlighter-rouge">npm run build</code>. This command with generate a file called ‚Äúdist‚Äù that will be deployed to Firebase server. It‚Äôs a compressed file that can be recognized and rendered. Then, with the firebase CLI (command line interface) installed, enter <code class="language-plaintext highlighter-rouge">firebase deploy</code>. Congratulations! You website is now launched to the internet!</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>npm run build
firebase deploy
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="customize-domain-name">Customize Domain Name</h2>

<blockquote>
  <p>Firebase will give you a domain name like ‚Äú<strong><a href="https://personalweb-55e41.web.app/">personalweb-55e41.web.app</a></strong>‚Äù which is hard to memorize. Thus, it‚Äôs better to cutomize our domain name. To do this, we firstly need to select a Domain name provider. I chosed Google Domain but you also can choose NameCheap, etc.Then you can buy and customize your domain name!</p>
</blockquote>

<p>After you choose a Domain name address and connect it to Firebase hosting. Firebase hosting will redirect the original domain to your new domain. Finally, everything works! In the world of internet, the domain is managed in DNS (Domain Name System), where there‚Äôre many DNS servers that constantly matching website domain names to corresponding IP adress so that your website can be found and display. So thank you DNS server!</p>

<p>‚ù§Ô∏è Final word: welcome everyone to visit my site: <a href="http://michaelxi.com">michaelxi.com</a></p>
<blockquote>

</blockquote>


                <hr style="visibility: hidden;">
                <ul class="pager">
                    
                    
                    <li class="next">
                        <a href="/2023/02/16/FirebaseMTM/" data-toggle="tooltip" data-placement="top" title="Firestore Many-to-many Relationship - Blog Taging">
                        Next<br>
                        <span>Firestore Many-to-many Relationship - Blog Taging</span>
                        </a>
                    </li>
                    
                </ul>
                <hr style="visibility: hidden;">

                
                <!-- disqus ËØÑËÆ∫Ê°Ü start -->
                <div class="comment">
                    <div id="disqus_thread" class="disqus-thread"></div>
                </div>
                <!-- disqus ËØÑËÆ∫Ê°Ü end -->
                

                
            </div>  

    <!-- Side Catalog Container -->
        
            <div class="
                col-lg-2 col-lg-offset-0
                visible-lg-block
                sidebar-container
                catalog-container">
                <div class="side-catalog">
                    <hr class="hidden-sm hidden-xs">
                    <h5>
                        <a class="catalog-toggle" href="#">CATALOG</a>
                    </h5>
                    <ul class="catalog-body"></ul>
                </div>
            </div>
        

    <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                


<section>
    
        <hr class="hidden-sm hidden-xs">
    
    <h5><a href="/archive/">FEATURED TAGS</a></h5>
    <div class="tags">
        
        
        
        
        
        
                <a data-sort="0000" 
                    href="/archive/?tag=Firebase"
                    title="Firebase"
                    rel="2">Firebase</a>
    </div>
</section>


                <!-- Friends Blog -->
                
<hr>
<h5>FRIENDS</h5>
<ul class="list-inline">
  
  <li><a href="http://michaelxi.com/">Michael Xi</a></li>
  
</ul>

            </div>
        </div>
    </div>
</article>

<!-- add support for mathjax by voleking-->






<!-- disqus ÂÖ¨ÂÖ±JS‰ª£Á†Å start (‰∏Ä‰∏™ÁΩëÈ°µÂè™ÈúÄÊèíÂÖ•‰∏ÄÊ¨°) -->
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = "https-michaelxi3-github-io";
    var disqus_identifier = "/2022/07/09/Portfolio";
    var disqus_url = "http://localhost:4000/2022/07/09/Portfolio/";

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<!-- disqus ÂÖ¨ÂÖ±JS‰ª£Á†Å end -->




<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'right',
          // icon: '#'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <!-- SNS Link -->
                


<ul class="list-inline text-center">


  
  
  
  
  
  
  <li>
    <a target="_blank" href="https://github.com/MichaelXi3">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-github fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
  <li>
    <a target="_blank" href="https://www.linkedin.com/in/yukun-xi">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
</ul>

                <p class="copyright text-muted">
                    Copyright &copy; Sphere 2023
                    <br>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<!-- Currently, only navbar scroll-down effect at desktop still depends on this -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js "></script>

<!-- Simple Jekyll Search -->
<script src="/js/simple-jekyll-search.min.js"></script>

<!-- Service Worker -->

<script src="/js/snackbar.js "></script>
<script src="/js/sw-registration.js "></script>


<!-- async load function -->
<script>
    function async(u, c) {
        var d = document, t = 'script',
            o = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        o.src = u;
        if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
        s.parentNode.insertBefore(o, s);
    }
</script>

<!--
     Because of the native support for backtick-style fenced code blocks
     right within the Markdown is landed in Github Pages,
     From V1.6, There is no need for Highlight.js,
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/
     - https://github.com/jneen/rouge/wiki/list-of-supported-languages-and-lexers
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->







<!--fastClick.js -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function () {
        var $nav = document.querySelector("nav");
        if ($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->



<!-- Baidu Tongji -->



<!-- Side Catalog -->

<script type="text/javascript">
    function generateCatalog(selector) {

        // interop with multilangual 
        if ('' == 'true') {
            _containerSelector = 'div.post-container.active'
        } else {
            _containerSelector = 'div.post-container'
        }

        // init
        var P = $(_containerSelector), a, n, t, l, i, c;
        a = P.find('h1,h2,h3,h4,h5,h6');

        // clean
        $(selector).html('')

        // appending
        a.each(function () {
            n = $(this).prop('tagName').toLowerCase();
            i = "#" + $(this).prop('id');
            t = $(this).text();
            c = $('<a href="' + i + '" rel="nofollow">' + t + '</a>');
            l = $('<li class="' + n + '_nav"></li>').append(c);
            $(selector).append(l);
        });
        return true;
    }

    generateCatalog(".catalog-body");

    // toggle side catalog
    $(".catalog-toggle").click((function (e) {
        e.preventDefault();
        $('.side-catalog').toggleClass("fold")
    }))

    /*
     * Doc: https://github.com/davist11/jQuery-One-Page-Nav
     * Fork by Hux to support padding
     */
    async("/js/jquery.nav.js", function () {
        $('.catalog-body').onePageNav({
            currentClass: "active",
            changeHash: !1,
            easing: "swing",
            filter: "",
            scrollSpeed: 700,
            scrollOffset: 0,
            scrollThreshold: .2,
            begin: null,
            end: null,
            scrollChange: null,
            padding: 80
        });
    });
</script>



<!-- Multi-Lingual -->


<!-- Simple Jekyll Search -->
<script>
    // https://stackoverflow.com/questions/1912501/unescape-html-entities-in-javascript
    function htmlDecode(input) {
        var e = document.createElement('textarea');
        e.innerHTML = input;
        // handle case of empty input
        return e.childNodes.length === 0 ? "" : e.childNodes[0].nodeValue;
    }

    SimpleJekyllSearch({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('search-results'),
        json: '/search.json',
        searchResultTemplate: '<div class="post-preview item"><a href="{url}"><h2 class="post-title">{title}</h2><h3 class="post-subtitle">{subtitle}</h3><hr></a></div>',
        noResultsText: 'No results',
        limit: 50,
        fuzzy: false,
        // a hack to get escaped subtitle unescaped. for some reason, 
        // post.subtitle w/o escape filter nuke entire search.
        templateMiddleware: function (prop, value, template) {
            if (prop === 'subtitle' || prop === 'title') {
                if (value.indexOf("code")) {
                    return htmlDecode(value);
                } else {
                    return value;
                }
            }
        }
    });

    $(document).ready(function () {
        var $searchPage = $('.search-page');
        var $searchOpen = $('.search-icon');
        var $searchClose = $('.search-icon-close');
        var $searchInput = $('#search-input');
        var $body = $('body');

        $searchOpen.on('click', function (e) {
            e.preventDefault();
            $searchPage.toggleClass('search-active');
            var prevClasses = $body.attr('class') || '';
            setTimeout(function () {
                $body.addClass('no-scroll');
            }, 400)

            if ($searchPage.hasClass('search-active')) {
                $searchClose.on('click', function (e) {
                    e.preventDefault();
                    $searchPage.removeClass('search-active');
                    $body.attr('class', prevClasses);  // from closure 
                });
                $searchInput.focus();
            }
        });
    });
</script>


<!-- Image to hack wechat -->
<img src="/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
